port: 7890
socks-port: 7891
allow-lan: true
bind-address: "*"
mode: rule
log-level: info
ipv6: false
profile:
  store-selected: true
  store-fake-ip: true
unified-delay: true
tcp-concurrent: true
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  default-nameserver:
    - 119.29.29.29
nameserver:
  - https://doh.pub/dns-query
fake-ip-filter:
  - "*.lan"
  - "localhost.ptlogin2.qq.com"
  - "dns.msftncsi.com"
  - "*.srv.nintendo.net"
  - "*.stun.playstation.net"
  - "xbox.*.microsoft.com"
  - "*.xboxlive.com"
fallback:
  - 1.1.1.1
  - 8.8.8.8
fallback-filter:
geoip: true
geoip-code: CN
ipcidr:
  - 240.0.0.0/4
proxies:
  - name: "Surge"
    type: http
    server: 192.168.50.90
    port: 7222
proxy-providers:
  clashmeta:
    type: http
    # è®¢é˜…é“¾æ¥, è®¢é˜…æ–‡ä»¶åº”å½“ä¸º yaml æ ¼å¼, å¦åˆ™åº”å½“è¿›è¡Œè®¢é˜…è½¬æ¢
    # åŒä¸€ä¸ªè®¢é˜…é“¾æ¥å¯èƒ½ä¼šæ ¹æ®ä¸åŒçš„ User-Agent è¿”å›ä¸åŒçš„å†…å®¹
    # è¯·æµ‹è¯• User-Agent ä¸º clash/clash.meta æ—¶æ˜¯å¦è¿”å› yaml
    url: "https://gist.githubusercontent.com/Anlanxy/a46b4d060291eded5b2c3d3f92d4aee1/raw/ClashMeta"
    interval: 1200
    path: ./profiles/proxies/subscribe.yaml
    health-check:
      # é€‰ä¸­æ—¶æ˜¯å¦è¿›è¡Œæµ‹è¯•
      enable: false
      interval: 600
      url: http://www.gstatic.com/generate_204
  # bp:
  #   type: http
  #   # è®¢é˜…é“¾æ¥, è®¢é˜…æ–‡ä»¶åº”å½“ä¸º yaml æ ¼å¼, å¦åˆ™åº”å½“è¿›è¡Œè®¢é˜…è½¬æ¢
  #   # åŒä¸€ä¸ªè®¢é˜…é“¾æ¥å¯èƒ½ä¼šæ ¹æ®ä¸åŒçš„ User-Agent è¿”å›ä¸åŒçš„å†…å®¹
  #   # è¯·æµ‹è¯• User-Agent ä¸º clash/clash.meta æ—¶æ˜¯å¦è¿”å› yaml
  #   url: "https://gist.githubusercontent.com/Anlanxy/a46b4d060291eded5b2c3d3f92d4aee1/raw/bp"
  #   interval: 1200
  #   path: ./profiles/proxies/subscribe.yaml
  #   health-check:
  #     # é€‰ä¸­æ—¶æ˜¯å¦è¿›è¡Œæµ‹è¯•
  #     enable: false
  #     interval: 600
  #     url: http://www.gstatic.com/generate_204
proxy-groups:
  - name: Proxies
    type: select
    proxies:
      - Fallback
      - Select
      - Direct
  - name: Fallback
    type: fallback
    url: "https://www.gstatic.com/generate_204"
    interval: 80
    proxies:
      - HK~
      - TW~
      - JP~
      - SG~
      - US~
      - KR~
  - name: Select
    type: select
    proxies:
      - HK~
      - TW~
      - SG~
      - JP~
      - US~
      - KR~
      - OR~
  - name: Mediaâ—†
    type: select
    proxies:
      - Fallback
      - Select
      - Direct
  - name: Mediaâ—‡
    type: select
    proxies:
      - Direct
      - HK~
      - TW~
  - name: Microsoft
    type: select
    proxies:
      - Select
      - Direct
  - name: Steam
    type: select
    proxies:
      - Select
      - Direct
  - name: HK~
    type: url-test
    url: "https://cp.cloudflare.com/generate_204"
    filter: "ğ»ğ‘œğ‘›ğ‘” ğ¾ğ‘œğ‘›ğ‘”|Hong Kong"
    tolerance: 20
    interval: 100
    use:
      - clashmeta
  - name: TW~
    type: url-test
    url: "https://cp.cloudflare.com/generate_204"
    filter: "ğ‘‡ğ‘ğ‘–ğ‘¤ğ‘ğ‘›|Taiwan"
    tolerance: 20
    interval: 100
    use:
      - clashmeta
  - name: JP~
    type: url-test
    url: "https://cp.cloudflare.com/generate_204"
    filter: "ğ½ğ‘ğ‘ğ‘ğ‘›|Japan"
    tolerance: 20
    interval: 100
    use:
      - clashmeta
  - name: SG~
    type: url-test
    url: "https://cp.cloudflare.com/generate_204"
    filter: "ğ‘†ğ‘–ğ‘›ğ‘”ğ‘ğ‘ğ‘œğ‘Ÿğ‘’|Singapore"
    tolerance: 20
    interval: 100
    use:
      - clashmeta
  - name: US~
    type: url-test
    url: "https://cp.cloudflare.com/generate_204"
    filter: "ğ‘ˆğ‘›ğ‘–ğ‘¡ğ‘’ğ‘‘ ğ‘†ğ‘¡ğ‘ğ‘¡ğ‘’ğ‘ |United States"
    tolerance: 20
    interval: 100
    use:
      - clashmeta
  - name: KR~
    type: url-test
    url: "https://cp.cloudflare.com/generate_204"
    filter: "ğ¾ğ‘œğ‘Ÿğ‘’ğ‘|Korea"
    tolerance: 20
    interval: 100
    use:
      - clashmeta
  - name: OR~
    type: select
    exclude-filter: ğ»ğ‘œğ‘›ğ‘” ğ¾ğ‘œğ‘›ğ‘”|ğ‘‡ğ‘ğ‘–ğ‘¤ğ‘ğ‘›|ğ½ğ‘ğ‘ğ‘ğ‘›|ğ‘ˆğ‘›ğ‘–ğ‘¡ğ‘’ğ‘‘ ğ‘†ğ‘¡ğ‘ğ‘¡ğ‘’ğ‘ |ğ‘†ğ‘–ğ‘›ğ‘”ğ‘ğ‘ğ‘œğ‘Ÿğ‘’|ğ¾ğ‘œğ‘Ÿğ‘’ğ‘|Hong Kong|Korea|United States|Singapore|Japan|Taiwan
    use:
      - clashmeta
  - name: AD block
    type: select
    proxies:
      - REJECT
  - name: Direct
    type: select
    proxies:
      - DIRECT
rule-providers:
  BiliBili:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/BiliBili_No_Resolve.yaml
  Netflix:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/Netflix_No_Resolve.yaml
  Disney:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/Disney_No_Resolve.yaml
  GlobalMedia:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia_Classical_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/GlobalMedia_Classical_No_Resolve.yaml
  OpenAI:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/OpenAI_No_Resolve.yaml
  Google:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/Google_No_Resolve.yaml
  DMM:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/DMM/DMM.yaml"
    interval: 86400
    path: ./ruleset/DMM.yaml
  Microsoft:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/Microsoft_No_Resolve.yaml
  PayPal:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/PayPal_No_Resolve.yaml
  Telegram:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/Telegram_No_Resolve.yaml
  Steam:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/Steam_No_Resolve.yaml
  Proxy:
    type: http
    behavior: domain
    interval: 86400
    path: ./ruleset/proxy.yaml
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt"
  Reject:
    type: http
    behavior: domain
    interval: 86400
    path: ./ruleset/reject.yaml
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt"
  Lan:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/Lan_No_Resolve.yaml
  ChinaMax:
    type: http
    behavior: classical
    url: "https://raw.gitmirror.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMax/ChinaMax_Classical_No_IPv6_No_Resolve.yaml"
    interval: 86400
    path: ./ruleset/ChinaMax_Classical_No_IPv6_No_Resolve.yaml
rules:
  - DOMAIN,www.feijiji.com,Select
  - DOMAIN,www.mxdm.xyz,Select
  - DOMAIN-SUFFIX,girigirilove.com,Proxies
  - RULE-SET,Reject,AD block
  - RULE-SET,BiliBili,Mediaâ—‡
  - RULE-SET,Netflix,Mediaâ—†
  - RULE-SET,Disney,Mediaâ—†
  - RULE-SET,DMM,Select
  - RULE-SET,GlobalMedia,Mediaâ—†
  - RULE-SET,OpenAI,Proxies
  - RULE-SET,Steam,Steam
  - RULE-SET,Google,Proxies
  - RULE-SET,PayPal,Select
  - RULE-SET,Telegram,Proxies
  - RULE-SET,Microsoft,Microsoft
  # - RULE-SET,Proxy,Proxies
  - RULE-SET,ChinaMax,Direct
  - RULE-SET,Lan,Direct
  - GEOIP,CN,Direct,no-resolve
  - MATCH,Proxies
